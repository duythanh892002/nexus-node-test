name: Nexus Node Auto Runner

on:
  workflow_dispatch:        # Cho phÃ©p báº¡n báº¥m cháº¡y thá»§ cÃ´ng náº¿u muá»‘n
  schedule:
    - cron: "0 */6 * * *"   # â° Tá»± Ä‘á»™ng cháº¡y láº¡i má»—i 6 giá» (UTC)

jobs:
  run-node:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸš€ Starting Nexus Testnet Node
        run: |
          echo "***************************************"
          echo "ğŸš€ Starting Nexus Testnet Node"
          echo "ğŸ†” Node ID: 25642744"
          echo "ğŸŒ Network: testnet"
          echo "***************************************"

          # CÃ i Docker
          sudo apt-get update -y
          sudo apt-get install -y docker.io

          # ÄÄƒng nháº­p Docker náº¿u cáº§n (bá» qua náº¿u public)
          # echo "${{ secrets.DOCKER_USERNAME }}" | docker login -u "${{ secrets.DOCKER_USERNAME }}" --password-stdin

          # Cháº¡y container Nexus Node (giáº£ Ä‘á»‹nh image cÃ³ sáºµn)
          docker run -d --name nexus-testnet \
            -e NODE_ID=25642744 \
            nexuschain/nexus-node:latest || true

          echo "âœ… Node is now running... (will run for 6 hours)"
          sleep 21600  # 6 giá» = 21600 giÃ¢y

          echo "ğŸ›‘ Stopping container after 6 hours..."
          docker stop nexus-testnet || true
          docker rm nexus-testnet || true

          echo "âœ… Finished one 6-hour session. Next run will start automatically in 6 hours."
